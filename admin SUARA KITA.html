<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel - SUARA KITA</title>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-W825KHL7Z4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-W825KHL7Z4');
</script>
<style>
  /* ===== Reset & Font ===== */
  * { margin:0; padding:0; box-sizing:border-box; font-family:'Poppins', sans-serif; }

  body {
    background: linear-gradient(135deg,#1E3A8A,#3B82F6);
    display:flex; justify-content:center; align-items:center;
    min-height:100vh; color:#fff;
  }

  /* ===== Login Page ===== */
  #loginBox {
    background: rgba(255,255,255,0.1);
    padding:50px 60px;
    border-radius:25px;
    text-align:center;
    box-shadow: 0 12px 30px rgba(0,0,0,0.3);
    width:320px;
    transition:0.3s;
  }

  #loginBox h1 {
    font-size:2em; color:#FACC15; margin-bottom:25px;
    letter-spacing:1px;
  }

  #loginBox input {
    width:100%; padding:14px; border-radius:12px; border:none;
    margin:12px 0; text-align:center; font-size:1em;
    transition:0.2s;
  }

  #loginBox input:focus { outline:none; box-shadow:0 0 8px #FACC15; }

  #loginBox button {
    width:100%; padding:14px; border:none; border-radius:25px;
    background:#FACC15; color:#1E3A8A; font-weight:bold;
    font-size:1em; cursor:pointer; margin-top:15px;
    transition:0.3s;
  }

  #loginBox button:hover { background:#EAB308; }

  /* ===== Admin Panel ===== */
  #adminPanel {
    display:none; width:95%; height:90vh; border-radius:20px;
    overflow:hidden; box-shadow:0 10px 30px rgba(0,0,0,0.3);
    display:flex; background: rgba(255,255,255,0.05);
  }

  /* Sidebar kiri */
  .sidebar {
    width:30%; background: rgba(255,255,255,0.08);
    display:flex; flex-direction:column; border-right:1px solid rgba(255,255,255,0.2);
  }
  .sidebar-header {
    padding:20px; text-align:center; font-weight:bold;
    color:#FACC15; font-size:1.2em; background: rgba(255,255,255,0.1);
  }
  .chat-list { flex:1; overflow-y:auto; }
  .chat-item {
    padding:15px 20px; cursor:pointer; border-left:3px solid transparent;
    transition:0.3s;
  }
  .chat-item:hover { background: rgba(255,255,255,0.1); border-left:3px solid #FACC15; }
  .chat-item.active { background: rgba(250,204,21,0.2); border-left:3px solid #FACC15; }
  .chat-item h4 { font-size:1em; color:#FACC15; }
  .chat-item p { font-size:0.85em; color:#E0E7FF; margin-top:5px; }

  /* Konten kanan */
  .main {
    flex:1; display:flex; flex-direction:column;
  }
  .main-header {
    padding:15px 25px; background: rgba(255,255,255,0.1);
    display:flex; justify-content:space-between; align-items:center; font-size:1.1em;
  }
  .main-header button {
    background:#FACC15; color:#1E3A8A; border:none; border-radius:12px; padding:6px 14px;
    font-weight:bold; cursor:pointer; transition:0.3s;
  }
  .main-header button:hover { background:#EAB308; }

  .main-body {
    flex:1; padding:25px; overflow-y:auto;
    background: rgba(255,255,255,0.03); border-top:1px solid rgba(255,255,255,0.1);
    border-bottom:1px solid rgba(255,255,255,0.1);
  }
  .main-body p { margin:12px 0; line-height:1.6; }

  .main-footer {
    padding:15px 25px; text-align:right; background: rgba(255,255,255,0.08);
  }
  .main-footer button {
    margin-left:10px; padding:8px 18px; border:none; border-radius:12px; font-weight:bold; cursor:pointer;
  }
  .approve { background:#22C55E; color:#fff; }
  .reject { background:#EF4444; color:#fff; }
  .delete { background:#6B7280; color:#fff; }
  .approve:hover { background:#16A34A; }
  .reject:hover { background:#DC2626; }
  .delete:hover { background:#4B5563; }

  .placeholder { text-align:center; margin-top:50px; color:#E0E7FF; opacity:0.7; font-size:1em; }

  @media(max-width:768px){
    #adminPanel { flex-direction:column; height:95vh; }
    .sidebar { width:100%; height:200px; border-right:none; border-bottom:1px solid rgba(255,255,255,0.2);}
    .main { flex:1; }
  }
</style>
</head>
<body>

<!-- ===== Halaman Login ===== -->
<div id="loginBox">
  <h1>Login Admin</h1>
  <input type="password" id="password" placeholder="Masukkan password admin">
  <button onclick="login()">Masuk</button>
</div>

<!-- ===== Panel Admin Setelah Login ===== -->
<div id="adminPanel">
  <!-- Sidebar kiri -->
  <div class="sidebar">
    <div class="sidebar-header">üìã Daftar Aspirasi</div>
    <div id="chatList" class="chat-list"></div>
  </div>

  <!-- Konten kanan -->
  <div class="main">
    <div class="main-header">
      <span id="judulAspirasi">Pilih Aspirasi</span>
      <div>
        <button onclick="logout()">Logout</button>
        <button onclick="window.location.href='tampilan awal SUARA KITA.html'">üè† Halaman Utama</button>
      </div>
    </div>
    <div class="main-body" id="detailBody">
      <p class="placeholder">Klik salah satu aspirasi untuk melihat detailnya.</p>
    </div>
    <div class="main-footer" id="actionButtons" style="display:none;">
      <button class="approve" onclick="ubahStatus('Approved')">Setujui</button>
      <button class="reject" onclick="ubahStatus('Rejected')">Tolak</button>
      <button class="delete" onclick="hapus()">Hapus</button>
    </div>
  </div>
</div>

<script>
const loginBox = document.getElementById("loginBox");
const adminPanel = document.getElementById("adminPanel");
const passwordInput = document.getElementById("password");
const chatList = document.getElementById("chatList");
const detailBody = document.getElementById("detailBody");
const actionButtons = document.getElementById("actionButtons");
const judulAspirasi = document.getElementById("judulAspirasi");
let selectedId = null;

// ===== Login =====
function login() {
  if(passwordInput.value.trim()==="mpk2025"){
    loginBox.style.display="none";
    adminPanel.style.display="flex";
    loadData();
  } else { alert("‚ùå Password salah!"); }
}

// ===== Logout =====
function logout(){
  if(confirm("Keluar dari panel admin?")){
    adminPanel.style.display="none";
    loginBox.style.display="block";
    passwordInput.value="";
  }
}

// ===== Load Data =====
function loadData(){
  const data=JSON.parse(localStorage.getItem("aspirasi"))||[];
  chatList.innerHTML="";
  if(data.length===0){
    chatList.innerHTML="<p style='text-align:center;margin-top:30px;color:#E0E7FF;'>Belum ada aspirasi masuk.</p>";
    return;
  }
  data.forEach(d=>{
    const item=document.createElement("div");
    item.classList.add("chat-item");
    item.innerHTML=`<h4>${d.nama} (${d.kelas})</h4><p>${d.jenis} - ${d.status||"Pending"}</p>`;
    item.onclick=(e)=>showDetail(d.id,e);
    chatList.appendChild(item);
  });
}

// ===== Show Detail =====
function showDetail(id,event){
  const data=JSON.parse(localStorage.getItem("aspirasi"))||[];
  const asp=data.find(a=>a.id===id); if(!asp) return;
  selectedId=id;
  document.querySelectorAll(".chat-item").forEach(i=>i.classList.remove("active"));
  event.currentTarget.classList.add("active");
  judulAspirasi.textContent=`${asp.nama} - ${asp.kelas}`;
  detailBody.innerHTML=`
    <p><b>Jenis:</b> ${asp.jenis}</p>
    <p><b>Status:</b> ${asp.status||"Pending"}</p>
    <hr style="margin:10px 0;border:none;border-top:1px solid rgba(255,255,255,0.2);">
    <p>${asp.isi}</p>`;
  actionButtons.style.display="block";
}

// ===== Ubah Status =====
function ubahStatus(status){
  if(!selectedId) return alert("Pilih aspirasi dulu.");
  const data=JSON.parse(localStorage.getItem("aspirasi"));
  const asp=data.find(a=>a.id===selectedId);
  asp.status=status;
  localStorage.setItem("aspirasi",JSON.stringify(data));
  loadData();
  showDetail(selectedId,document.querySelector(".chat-item.active"));
}

// ===== Hapus =====
function hapus(){
  if(!selectedId) return alert("Pilih aspirasi dulu.");
  if(!confirm("Yakin ingin hapus aspirasi ini?")) return;
  let data=JSON.parse(localStorage.getItem("aspirasi"));
  data=data.filter(a=>a.id!==selectedId);
  localStorage.setItem("aspirasi",JSON.stringify(data));
  selectedId=null;
  detailBody.innerHTML="<p class='placeholder'>Klik salah satu aspirasi untuk melihat detailnya.</p>";
  actionButtons.style.display="none";
  loadData();
}
</script>

</body>
</html>

